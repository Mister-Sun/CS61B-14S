<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/geral.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/global.js" type="text/javascript" />
    </h:head>
    <h:body>
        <div align="center">
            <p:ajaxStatus style="width:220px;height:19px;" id="ajaxStatusPanel" onstart="dlg1.show();" oncomplete="dlg1.hide();"/>  
            <p:dialog id="basicDialog" widgetVar="dlg1" modal="true" closable="false" resizable="false" >  
                <h:graphicImage value="/images/ajax-loader-2.gif" />
            </p:dialog> 



            <br/>
            <h:form id="formEvents" style="width: 700px;">
                <p:messages autoUpdate="true" id="msg"/>
                <p:growl autoUpdate="true" id="eventosmsg" life="5000"/>
                <p:panel id="inscricao" style="width: 700px;" >
                    <h:panelGrid columns="4" style="font-size: 11px;">
                        <h:panelGroup>
                            <h:outputLabel id="cnpjLabel" value="CNPJ" for="cnpjField" style="font-weight: bold"/>
                            <p:inputMask id="cnpjField" value="#{regEvents.cnpj}" style="width: 192px" mask="99.999.999/9999-99" />

                            <p:commandButton action="#{regEvents.loadCompany()}" update=":formEvents:tradeName" value="BUSCAR" style="width: 130px" onclick="dlg1.show();" oncomplete="dlg1.hide();" />
                            <h:outputLabel id="tradeName" value="#{regEvents.personCom.company.tradeName}" style="font-weight: bold"/>
                        </h:panelGroup>
                    </h:panelGrid>
                    <p:panel id="eventos" header="EVENTOS" style="border:transparent " >
                        <p:treeTable id="eventTable" value="#{regEvents.root}" var="event" >

                            <p:column headerText="Name">
                                <h:outputText value="#{event.name}" />
                            </p:column>
                            <p:column headerText="Data">
                                <h:outputText value="#{event.eventDateToEmail}" />
                            </p:column>
                            <p:column headerText="Local">
                                <h:outputText value="#{event.eventPlace}" />
                            </p:column>
                            <p:column headerText="Valor">
                                <h:outputText value="#{event.cost}" />
                            </p:column>
                            <p:column headerText="Inscrever-me">  
                                <p:selectBooleanCheckbox value="#{event.register}" >
                                    <p:ajax  update=":formEvents:eventTable" listener="#{regEvents.validateEvent(event)}"/>
                                </p:selectBooleanCheckbox>
                            </p:column>
                            <p:column headerText="Participation Type">
                                <p:selectOneMenu id="partiTypeField" value="#{regEvents.partiTypeId}">
                                    <f:selectItem itemLabel="Sem Pai" itemValue="" />  
                                    <f:selectItems value="#{regEvents.loadPartiTypes(event)}" var="e" itemLabel="#{e.name}" itemValue="#{e.id}"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:treeTable>
                    </p:panel>
                    <div align="center">
                        <h:panelGrid columns="2">
                            <p:commandButton value="INSCREVER-SE" action="#{regEvents.registerPayment()}"  update=":formEvents:eventTable"/>
                            <p:commandButton action="#{regEvents.cleanCadastre()}" value="LIMPAR" process="@this" update="eventTable"  onclick="dlg1.show();" oncomplete="dlg1.hide();" />
                        </h:panelGrid>
                    </div>
                </p:panel>
            </h:form>

            <!--            <h:form id="formdlg2" style="width: 580px;" prependId="false" >
                            <p:dialog header="Effects" widgetVar="dlg2"  height="280">
                                <h:panelGrid columns="1" style="font-size: 11px;" id="part0" > 
                                    <h:panelGroup>
                                        <h:outputLabel id="numberLabel" value="NUMERO" for="numberField" style="font-weight: bold"/><br/>
                                        <p:inputMask required="true" requiredMessage="Informe o numero do seu cartao" id="numberField" value="#{regEvents.xml.owner.cardNumber}" 
                                                     style="width: 200px" mask="9999999999999999" />
                                    </h:panelGroup>
                                </h:panelGrid>
                                <h:panelGrid columns="1" style="font-size: 11px;" id="part1" > 
                                    <h:panelGroup>
                                        <h:outputLabel id="bandLabel" value="Bandeira" for="bandField" style="font-weight: bold"/><br/>
                                        <p:selectOneMenu id="bandField" value="#{regEvents.xml.cardFlag}" required="true" requiredMessage="Informe a bandeira do seu cartão.">
                                            <f:selectItem itemLabel="Selecione..." itemValue="" />  
                                            <f:selectItems value="#{apoio.cards}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                </h:panelGrid>
            
                                <h:panelGrid columns="1" style="font-size: 11px;" id="part2"> 
                                    <h:panelGroup>
                                        <h:outputLabel id="validityLabel" value="VALIDADE" for="validityField" style="font-weight: bold"/><br/>
                                        <p:inputMask required="true" requiredMessage="Informe a validade do cartão" id="validityField" value="#{regEvents.xml.owner.cardValidity}" 
                                                     style="width: 50px" mask="99/9999" />
                                    </h:panelGroup>
                                </h:panelGrid>
            
                                <h:panelGrid columns="1" style="font-size: 11px;" id="part3"> 
                                    <h:panelGroup>
                                        <h:outputLabel id="codeLabel" value="CÓDIGO DE SEGURANÇA" for="codeField" style="font-weight: bold"/><br/>
                                        <p:inputMask required="true" requiredMessage="Informe o código de sgurança do cartão" id="codeField" value="#{regEvents.xml.owner.securityCode}" 
                                                     style="width: 50px" mask="999" />
                                    </h:panelGroup>
                                </h:panelGrid>
                                
                                
                                <h:panelGrid id="pgdlg2" columns="1" style="font-size: 11px;">
                                    <p:commandButton value="Add" action="#{regEvents.registerPayment()}"  update=":formEvents:eventTable,pgdlg2" oncomplete="dlg2.hide();"/>
                                </h:panelGrid>
                            </p:dialog>
                        </h:form>-->
        </div>
    </h:body>
</html>
