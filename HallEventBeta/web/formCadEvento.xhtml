<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/geral.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/global.js" type="text/javascript" />
        <script src="#{facesContext.externalContext.requestContextPath}/js/util.js" type="text/javascript"/>
        <script type="text/javascript">

        </script>
    </h:head>

    <body style="width: 510px;">
        <div align="center">
            <p:ajaxStatus style="width:220px;height:19px;" id="ajaxStatusPanel" onstart="dlg1.show();" oncomplete="dlg1.hide();"/>  
            <p:dialog id="basicDialog" widgetVar="dlg1" modal="true" closable="false" resizable="false" >  
                <h:graphicImage value="/images/ajax-loader-2.gif" />
            </p:dialog> 
            <br/>
            <h:form id="formEvento" style="width: 510px;">
                <p:messages autoUpdate="true" id="msg"/>
                <p:growl autoUpdate="true" id="eventosmsg" life="5000"/>
                <p:panel id="acordion" style="width: 510px;" >
                    <p:panel id="dadosevento" header="DADOS DO EVENTO" style="border:transparent;height: 300px" >
                        <h:panelGrid columns="1" style="font-size: 11px;" id="part"> 
                            <h:panelGroup>
                                <h:outputLabel id="nameLabel" value="NOME" for="nameField" style="font-weight: bold"/><br/>
                                <p:inputText required="true" requiredMessage="Informe o seu nome" id="nameField" value="#{cadEvento.event.name}" 
                                             style="width: 450px" onkeyup="Maiuscula(this);
                                                     notEspecial()"/>
                            </h:panelGroup>
                        </h:panelGrid>

                        <h:panelGrid columns="3" style="font-size: 11px;float: left" id="part2"> 
                            <h:panelGroup>
                                <h:outputLabel id="dataILabel" value="DATA DE INÍCIO"  style="font-weight: bold"/><br/>
                                <p:calendar value="#{cadEvento.event.beginDate}" pattern="dd/MM/yyyy" required="true" requiredMessage="Informe a data de início" locale="pt" />    
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputLabel id="dataFLabel" value="DATA DE ENCERRAMENTO" style="font-weight: bold"/><br/>
                                <p:calendar locale="pt" value="#{cadEvento.event.endDate}" pattern="dd/MM/yyyy" required="true" requiredMessage="Informe a data de encerramento" />  
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputLabel id="fatherLabel" value="EVENTO PAI" for="fatherField" style="font-weight: bold"/><br/>
                                <p:selectOneMenu id="fatherField" value="#{cadEvento.eventEvent.fatherEvent}" converter="converter">
                                    <f:selectItem itemLabel="Sem Pai" itemValue="" />  
                                    <f:selectItems value="#{cadEvento.listEvents}" var="e" itemLabel="#{e.name}" itemValue="#{e}"/>
                                </p:selectOneMenu>
                            </h:panelGroup>
                        </h:panelGrid>

                        <h:panelGrid columns="2" style="font-size: 11px;float: left" id="part5"> 
                            <h:panelGroup>
                                <h:outputLabel id="horaILabel" value="HORÁRIO DE INÍCIO"  style="font-weight: bold"/><br/>
                                <p:calendar locale="pt" value="#{cadEvento.event.beginTime}" pattern="HH:mm" timeOnly="true" required="true" requiredMessage="Informe a hora de início" />    
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputLabel id="horaFLabel" value="HORÁRIO DE ENCERRAMENTO" style="font-weight: bold"/><br/>
                                <p:calendar locale="pt" value="#{cadEvento.event.endTime}" pattern="HH:mm" timeOnly="true" required="true" requiredMessage="Informe a hora de encerramento" />  
                            </h:panelGroup>
                        </h:panelGrid><p/>

                        <h:panelGrid columns="3" style="font-size: 11px;float: left" id="part1">
                            <h:panelGroup>
                                <h:outputLabel id="isPaidLabel" value="CATEGORIA" for="isPaidField" style="font-weight: bold"/><br/>
                                <p:selectOneRadio id="isPaidField" value="#{cadEvento.event.free}" required="true" requiredMessage="Informe a categoria do evento." >
                                    <p:ajax update="valueField" />
                                    <f:selectItem itemLabel="Pago" itemValue="false"/>
                                    <f:selectItem itemLabel="Gratuito" itemValue="true"/>
                                </p:selectOneRadio>
                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputLabel id="ValueLabel" value="VALOR" for="valueField" style="font-weight: bold"/><br/>
                                <p:inputText required="true" requiredMessage="Informe o valor do evento" id="valueField" value="#{cadEvento.event.cost}" onkeypress="return money(this);"/>

                            </h:panelGroup>
                            <h:panelGroup>
                                <h:outputLabel id="isPrivateLabel" value="TIPO" for="isPrivateField" style="font-weight: bold"/><br/>
                                <p:selectOneRadio id="isPrivateField" value="#{cadEvento.event.isPrivate}" required="true" requiredMessage="Informe o tipo do evento." >
                                    <p:ajax update="valueField" />
                                    <f:selectItem itemLabel="Publico" itemValue="false"/>
                                    <f:selectItem itemLabel="Privado" itemValue="true"/>
                                </p:selectOneRadio>
                            </h:panelGroup>
                        </h:panelGrid>

                        <h:panelGrid columns="1" style="font-size: 11px;" id="part3"> 
                            <h:panelGroup>
                                <h:outputLabel id="localLabel" value="LOCAL DO EVENTO" style="font-weight: bold"/><br/>
                                <p:inputText required="true" requiredMessage="Informe o local do evento" id="eventoField" value="#{cadEvento.event.eventPlace}" 
                                             style="width: 450px" onkeyup="Maiuscula(this);"/>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:panelGrid columns="1" style="font-size: 11px;float: left" id="part4">
                            <h:panelGroup>
                                <h:outputLabel id="qtdLabel" value="QUANTIDADE MAXIMA" for="qtdField" style="font-weight: bold"/><br/>
                                <p:spinner id="qtdField" value="#{cadEvento.event.maxQuantity}"/>  
                            </h:panelGroup>
                        </h:panelGrid>
                    </p:panel>


                    <h:panelGrid columns="2" style="font-size: 11px;">
                        <h:panelGroup>
                            <h:outputLabel id="priceComLabel" value="Price" style="font-weight: bold"/><br/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:commandButton value="Add" type="button" onclick="dlg2.show();" />

                        </h:panelGroup>
                    </h:panelGrid>
                    <p:panel id="pricesComPanel" header="Price" style="border:transparent" >
                        <p:dataTable id="pricesComTable" rowIndexVar="rowIndex" rowKey="rowIndex" 
                                     var="price" value="#{cadEvento.event.prices}" emptyMessage="Nenhum registro encontrado" >  
                            <p:column headerText="N°" >  
                                <h:outputText value="#{rowIndex + 1}" />  
                            </p:column> 
                            <p:column headerText="Name" width="90" >  
                                <h:outputText value="#{price.priceName}" />  
                            </p:column>  
                            <p:column headerText="Begin date" width="90" >  
                                <h:outputText value="#{price.beginDate}" />  
                            </p:column>
                            <p:column headerText="End date" >  
                                <h:outputText value="#{price.endDate}"/>  
                            </p:column>
                            <p:column headerText="Price" >  
                                <h:outputText value="#{price.price}"/>  
                            </p:column>
                        </p:dataTable>  
                    </p:panel>

                    <h:panelGrid columns="2" style="font-size: 11px;">
                        <h:panelGroup>
                            <h:outputLabel id="partiTypeComLabel" value="Participation Type" style="font-weight: bold"/><br/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:commandButton value="Add" type="button" onclick="dlg3.show();" />

                        </h:panelGroup>
                    </h:panelGrid>
                    <p:panel id="partiTypeComPanel" header="Participation Type" style="border:transparent" >
                        <p:dataTable id="partiTypeComTable" rowIndexVar="rowIndex" rowKey="rowIndex" 
                                     var="partiType" value="#{cadEvento.event.partiTypes}" emptyMessage="Nenhum registro encontrado" >  
                            <p:column headerText="N°" >  
                                <h:outputText value="#{rowIndex + 1}" />  
                            </p:column> 
                            <p:column headerText="Name" width="90" >  
                                <h:outputText value="#{partiType.name}" />  
                            </p:column>  
                        </p:dataTable>  
                    </p:panel>



                </p:panel>

                <div align="center">
                    <h:panelGrid columns="3">
                        <p:commandButton action="#{cadEvento.saveEvent()}" value="CADASTRAR" update="formEvento" style="width: 130px"  >
                        </p:commandButton>
                        <p:commandButton immediate="true" action="#{cadEvento.cleanEventCadastre()}" value="LIMPAR" process="@this" update="formEvento"  onclick="dlg1.show();" oncomplete="dlg1.hide();"/>

                    </h:panelGrid>
                </div>



            </h:form>
            <h:form>
                <p:commandButton action="#{cadEvento.setUpTree()}" value="TESTAR" update="teste" onclick="dlg1.show();" oncomplete="dlg1.hide();" immediate=""/>
                <p:tree id="teste" value="#{cadEvento.root}" var="node" >
                    <p:treeNode>
                        <h:outputText value="#{node}" />
                    </p:treeNode>
                </p:tree>
            </h:form>

            <h:form id="formdlg2" style="width: 510px;" prependId="false" >
                <p:dialog header="Effects" widgetVar="dlg2"  height="100">
                    <h:panelGrid id="pgdlg2" columns="4" style="font-size: 11px;">
                        <h:panelGroup>
                            <h:outputLabel id="dataILabel1" value="Begin Date"  style="font-weight: bold"/><br/>
                            <p:calendar value="#{cadEvento.price.beginDate}" pattern="dd/MM/yyyy" required="true" requiredMessage="Informe a data de início" locale="pt" />    
                        </h:panelGroup>

                        <h:panelGroup>
                            <h:outputLabel id="dataILabel2" value="End Date"  style="font-weight: bold"/><br/>
                            <p:calendar value="#{cadEvento.price.endDate}" pattern="dd/MM/yyyy" required="true" requiredMessage="Informe a data de início" locale="pt" />    
                        </h:panelGroup>

                        <h:panelGroup>
                            <h:outputLabel id="priceNameLabel" value="Price Name" style="font-weight: bold"/><br/>
                            <p:inputText required="true" requiredMessage="Informe o local do evento" id="priceNameField" value="#{cadEvento.price.priceName}" />
                        </h:panelGroup>

                        <h:panelGroup>
                            <h:outputLabel id="priceLabel" value="Price" style="font-weight: bold"/><br/>
                            <p:inputText required="true" requiredMessage="Informe o local do evento" id="priceField" value="#{cadEvento.price.price}" />
                        </h:panelGroup>

                        <p:commandButton value="Add"  action="#{cadEvento.addPrice()}" update=":formEvento:pricesComPanel,pgdlg2" oncomplete="dlg2.hide();"/>

                    </h:panelGrid>
                </p:dialog>
            </h:form>

            <h:form id="formdlg3" style="width: 510px;" prependId="false" >
                <p:dialog header="Effects" widgetVar="dlg3"  height="100">
                    <h:panelGrid id="pgdlg3" columns="1" style="font-size: 11px;">
                        
                        <h:panelGroup>
                            <h:outputLabel id="partiTypeLabel" value="Name" style="font-weight: bold"/><br/>
                            <p:inputText required="true" requiredMessage="Informe o local do evento" id="partiTypeField" value="#{cadEvento.partiType.name}" />
                        </h:panelGroup>

                        <p:commandButton value="Add"  action="#{cadEvento.addPartiType()}" update=":formEvento:partiTypeComPanel,pgdlg3" oncomplete="dlg3.hide();"/>

                    </h:panelGrid>
                </p:dialog>
            </h:form>

        </div>


    </body>
</html>
